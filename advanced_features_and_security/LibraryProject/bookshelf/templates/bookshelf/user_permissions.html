{% extends 'bookshelf/base.html' %}

{% block title %}User Permissions - Library Management System{% endblock %}

{% block header %}User Permissions & Groups{% endblock %}

{% block content %}
<h2>Your Account Information</h2>

<div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin-bottom: 30px;">
    <div style="padding: 20px; background-color: #f8f9fa; border-radius: 8px;">
        <h3>User Details</h3>
        <p><strong>Username:</strong> {{ user.username }}</p>
        <p><strong>Email:</strong> {{ user.email|default:"Not provided" }}</p>
        <p><strong>Full Name:</strong> {{ user.first_name }} {{ user.last_name }}</p>
        <p><strong>Date Joined:</strong> {{ user.date_joined|date:"F d, Y" }}</p>
        <p><strong>Is Staff:</strong> {{ user.is_staff|yesno:"Yes,No" }}</p>
        <p><strong>Is Superuser:</strong> {{ user.is_superuser|yesno:"Yes,No" }}</p>
    </div>
    
    <div style="padding: 20px; background-color: #f8f9fa; border-radius: 8px;">
        <h3>Group Memberships</h3>
        {% if groups %}
            {% for group in groups %}
                <span class="group-badge">{{ group.name }}</span>
            {% endfor %}
        {% else %}
            <p style="color: #6c757d;">You are not assigned to any groups.</p>
        {% endif %}
    </div>
</div>

<div style="margin-bottom: 30px;">
    <h3>All Permissions ({{ permissions|length }})</h3>
    <div style="max-height: 200px; overflow-y: auto; padding: 15px; background-color: #f8f9fa; border-radius: 8px;">
        {% if permissions %}
            {% for permission in permissions %}
                <div style="margin-bottom: 5px; padding: 5px; background-color: white; border-radius: 4px;">
                    <code>{{ permission }}</code>
                </div>
            {% endfor %}
        {% else %}
            <p style="color: #6c757d;">No permissions assigned.</p>
        {% endif %}
    </div>
</div>

<div style="margin-bottom: 30px;">
    <h3>Custom Model Permissions</h3>
    <div style="padding: 15px; background-color: #f8f9fa; border-radius: 8px;">
        {% if custom_permissions %}
            {% for permission in custom_permissions %}
                <span class="permission-badge">{{ permission }}</span>
            {% endfor %}
        {% else %}
            <p style="color: #6c757d;">No custom permissions assigned.</p>
        {% endif %}
    </div>
</div>

<div style="padding: 20px; background-color: #e7f3ff; border-radius: 8px; border-left: 4px solid #007bff;">
    <h4>Permission Groups Explained:</h4>
    <ul>
        <li><strong>Viewers:</strong> Can view books, authors, and libraries</li>
        <li><strong>Editors:</strong> Can view, create, and edit books, authors, and libraries</li>
        <li><strong>Admins:</strong> Can perform all actions including deletion</li>
    </ul>
</div>

<div style="margin-top: 20px;">
    <a href="{% url 'bookshelf:book_list' %}" class="btn">Back to Books</a>
    <a href="/admin/" class="btn">Admin Panel</a>
</div>
{% endblock %}
